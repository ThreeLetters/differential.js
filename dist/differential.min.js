/*
 Differential.js: JS HTML Animation/movement engine

 Author: Andrews54757
 License: MIT (https://github.com/ThreeLetters/differential.js/blob/master/LICENSE)
 Source: https://github.com/ThreeLetters/differential.js
 Build: v0.0.1
 Built on: 07/12/2017
*/

var Easings={},Queues={main:{list:[],active:!1,parrallel:!1},parrallel:{list:[],active:!1,parrallel:!0}},Now=Date.now(),Stop=!0;function convertOptions(a){return{easing:a.easing||"swing",done:a.done||function(){},queue:void 0!==a.queue?a.queue:!0,specialEasing:a.specialEasing,step:a.step,progress:a.progress,start:a.start||function(){},duration:a.duration||400}}
var curves={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,
.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86]},name;for(name in curves){var curve=curves[name];Easings[name]=generateBezier(curve[0],curve[1],curve[2],curve[3])}Easings.linear=function(a){return a};Easings.swing=function(a){return.5-Math.cos(a*Math.PI)/2};
function generateBezier(a,d,b,c){function h(a,b,c){return(((1-3*c+3*b)*a+(3*c-6*b))*a+3*b)*a}var e="Float32Array"in window;if(4!==arguments.length)return!1;for(var g=0;4>g;++g)if("number"!==typeof arguments[g]||isNaN(arguments[g])||!isFinite(arguments[g]))return!1;a=Math.min(a,1);b=Math.min(b,1);a=Math.max(a,0);b=Math.max(b,0);var m=e?new Float32Array(11):Array(11),l=!1;e=function(e){if(!l&&(l=!0,a!==d||b!==c))for(var f=0;11>f;++f)m[f]=h(.1*f,a,b);if(a===d&&b===c)return e;if(0===e)return 0;if(1===
e)return 1;var g=0;for(f=1;10!==f&&m[f]<=e;++f)g+=.1;--f;f=g+(e-m[f])/(m[f+1]-m[f])*.1;var k=3*(1-3*b+3*a)*f*f+2*(3*b-6*a)*f+3*a;if(.001<=k){for(g=0;4>g;++g){k=3*(1-3*b+3*a)*f*f+2*(3*b-6*a)*f+3*a;if(0===k)break;var n=h(f,a,b)-e;f-=n/k}e=f}else if(0===k)e=f;else{f=g;g+=.1;var p=0;do n=f+(g-f)/2,k=h(n,a,b)-e,0<k?g=n:f=n;while(1E-7<Math.abs(k)&&10>++p);e=n}return h(e,d,c)};e.getControlPoints=function(){return[{x:a,y:d},{x:b,y:c}]};var k="generateBezier("+[a,d,b,c]+")";e.toString=function(){return k};
return e}
var generateSpringRK4=function(){function a(a,c,d){var b=a.v+d.dv*c;return{dx:b,dv:-a.tension*(a.x+d.dx*c)-a.friction*b}}function d(b,c){var d={dx:b.v,dv:-b.tension*b.x-b.friction*b.v},e=a(b,.5*c,d),g=a(b,.5*c,e),m=a(b,c,g),l=1/6*(d.dv+2*(e.dv+g.dv)+m.dv);b.x+=1/6*(d.dx+2*(e.dx+g.dx)+m.dx)*c;b.v+=l*c;return b}return function g(a,h,e){var c={x:-1,v:0,tension:null,friction:null},l=[0],k=0,p;a=parseFloat(a)||500;h=parseFloat(h)||20;e=e||null;c.tension=a;c.friction=h;(p=null!==e)?(k=g(a,h),a=k/e*.016):
a=.016;for(;;){var f=d(f||c,a);l.push(1+f.x);k+=16;if(!(1E-4<Math.abs(f.x)&&1E-4<Math.abs(f.v)))break}return p?function(a){return l[a*(l.length-1)|0]}:k}}();function generateStep(a){return function(d){return 1/a*Math.round(d*a)}}function getProperty(a,d){return a.style[d.nameJS]?a.style[d.nameJS]:window.getComputedStyle(a).getPropertyValue(d.nameCSS)}function getCssString(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})}
function getJsString(a){return a.split("-").map(function(a,b){return 0!==b?capitalizeFirstLetter(a):a}).join("")}function capitalizeFirstLetter(a){return a.charAt(0).toUpperCase()+a.slice(1)}
function animate(a,d,b){b=convertOptions(b);var c={},h;for(h in d){var e=d[h],g=b.easing;"object"===typeof e&&(g=e.easing||b.easing,e=e.value);var m=!1;"="===e.charAt(1)&&(m=e.charAt(0),e=e.substr(2));var l={nameJS:getJsString(h),nameCSS:getCssString(h),ending:null,toValue:null,originalValue:null,originalValueRaw:null,diffValue:null,init:function(){this.originalValueRaw=getProperty(a,this);this.originalValue=parseFloat(this.originalValueRaw);if(m)switch(m){case "+":this.toValue=this.originalValue+
this.toValue;break;case "-":this.toValue=this.originalValue-this.toValue;break;case "*":this.toValue*=this.originalValue;break;case "/":this.toValue=this.originalValue/this.toValue;break;case "^":this.toValue=Math.pow(this.originalValue,this.toValue)}this.diffValue=this.toValue-this.originalValue;this.ending.trim()||(this.ending=this.originalValueRaw.substr(this.originalValue.toString().length))}},k=parseFloat(e);l.ending=e.substr(k.toString().length);l.toValue=k;b.queue||l.init();c[g]||(c[g]=[]);
c[g].push(l)}Queues[b.queue?"main":"parrallel"].list.push({element:a,options:b,properties:c,duration:b.duration,init:function(){for(var a in c)c[a].forEach(function(a){a.init()})}});Stop=!1;run()}function step(a,d){var b=d/a.duration,c;for(c in a.properties){var h=Easings[c](b);a.properties[c].forEach(function(b){a.element.style[b.nameJS]=(b.diffValue*h+b.originalValue).toString()+b.ending})}}
function end(a,d){for(var b in a.properties)a.properties[b].forEach(function(b){a.element.style[b.nameJS]=b.toValue.toString()+b.ending});b=Queues[d];b.parrallel?(b=Queue.list.indexOf(a),Queue.list.splice(b,1)):b.active=!1}
function run(){if(!Stop){window.requestAnimationFrame(run);var a=Date.now(),d=a-Now;Now=a;if(1<=d){var b=!0,c;for(c in Queues)if(Queues[c].parrallel)Queues[c].list.forEach(function(a){if(void 0===a.startTime)a.startTime=Now;else{var d=Now-a.startTime;d>=a.duration?end(a,c):step(a,d,c)}b=!1});else if(!Queues[c].active&&Queues[c].list.length&&(Queues[c].active=Queues[c].list.pop(),Queues[c].active.init()),a=Queues[c].active)void 0===a.startTime?a.startTime=Now:(d=Now-a.startTime,d>=a.duration?end(a,
c):step(a,d,c)),b=!1;b&&(Stop=b)}}}window.D=function D(a,d,b,c,h){if("string"===typeof a)return D[a].apply(Array.from(arguments).slice(1));b&&"object"!==typeof b&&("function"===typeof b?(b={done:b},c&&(b.duration=c),h&&(b.easing=h)):(b={duration:b},c&&(b.easing=c),h&&(b.done=h)));return animate(a,d,b||{})};D.addEase=function(a,d){Easings[a]="function"===typeof d?d:"object"===typeof d?4===d.length?generateBezier(d[0],d[1],d[2],d[3]):generateSpringRK4(d[0],d[1]):generateStep(d)};
D.stop=function(){Stop=!0};
